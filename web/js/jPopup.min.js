!function(e,n){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define([],function(){return e.jPopup=n()}):"object"==typeof module&&module.exports?module.exports=n():e.jPopup=n()}(this,function(){"use strict";function n(e){var n=0<arguments.length&&void 0!==e?e:{};1==(i=0!=n.shouldSetHash)&&(s=void 0!==n.hashtagValue?n.hashtagValue:"#popup"),d(n.content).then(a).then(c(i))}function o(e){27==e.keyCode&&n.prototype.close(!0)}function t(){window.location.hash!==s&&n.prototype.close(!1)}var i,s,d=function(e){return u.classList.add("jPopupOpen"),Promise.resolve(document.body.insertAdjacentHTML("beforeend",'<div class="jPopup">\n                <button type="button" class="jCloseBtn"><div class="graphicIcon"></div></button>\n                <div class="content">'.concat(e,"</div>\n            </div>")))},c=function(e){1==e?window.location.hash=s:window.history.back()},a=function(){document.getElementsByClassName("jCloseBtn")[0].addEventListener("click",function(){n.prototype.close(!0)}),window.addEventListener("keydown",o),1==i&&window.addEventListener("hashchange",t)},u=document.querySelector("html");return n.prototype={close:function(e){u.classList.add("jPopupClosed"),1==i&&(e&&c(!1),window.removeEventListener("hashchange",t)),window.removeEventListener("keydown",o),document.getElementsByClassName("jPopup")[0].addEventListener("animationend",function(e){e.target.parentNode.removeChild(this),u.classList.remove("jPopupClosed"),u.classList.remove("jPopupOpen")})},open:function(e){n(e)}},n});